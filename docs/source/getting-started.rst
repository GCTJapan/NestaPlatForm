
.. _getting-started:

====================
Getting Started
====================

Nesta Platform APIを使用するために必要な準備について記します。

------------------------------------------------------------------------------

アカウント登録
====================

Nesta Platformにアカウントを登録します。
クローズドなシステムのため、アカウント登録機能は公開されていません。
運営者への直接連絡により申し込んで下さい。

運営者によりアカウント登録がされると、licensee_idと認証トークンが発行されます。


.. code-block::

  //認証トークン例
  DazDL7Ey/bRH8dVBHSi03g==

------------------------------------------------------------------------------


Callback APIの設定
====================

Nesta Platform APIの決済機能を使うと、BTC, NSTなどの暗号資産による入出金が行えます。
Callback用のAPIをシステムに登録しておくことで、ブロックチェーン上のトランザクションを検知した際に通知します。

インタフェースの詳細は :doc:`こちら</api-callback>` を参照して下さい。

Callback URLを運営に連絡すると設定されます。

------------------------------------------------------------------------------


最初のユーザを登録
====================
APIを使って最初のカスタマーを登録します。
認証トークンを使って :doc:`[POST]\/user API</api-user>` をコールします。

例はStaging環境へのアクセスです。

.. code-block::

  curl -X POST "http://pf-stg.nesta.world/api/user" -H  "Authorization: Bearer DazDL7Ey/bRH8dVBHSi03g==" -H  "Content-Type: application/json" -d "{\"customer_id\":\"customer_123\"}"

.. code-block::

  //response body
  {
    "result": true,
    "customer_id": "customer_123",
    "licensee_id": "licensee_abc",
    "nesta_address": "0xd836cf0fb33f1e911d569f9700ffcc2c28f4f9db",
    "btc_address": "2NGDqiRMygxgDDqhzdS67j4NMAvLQjnLXBN"
  }


レスポンスに含まれる暗号資産アドレスが、作成したユーザ用の入金アドレスです。
このアドレスに対する送金トランザクションを検知すると、Callback APIに通知されます。


------------------------------------------------------------------------------


入金テスト
====================

作成したユーザのBTCまたはNSTアドレスに暗号資産を送金します。(Staging環境の場合は各ブロックチェーンのテストネットを使用します)
トランザクションが完了してから一定時間の後に設定したCallback APIに通知がされるか確認します。

------------------------------------------------------------------------------


登録事項の変更
====================

Callback APIの再設定や認証キーの再発行が必要な場合は、運営に直接連絡して下さい。

